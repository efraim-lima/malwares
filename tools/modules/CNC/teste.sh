#!/bin/bash

# Função para exibir uma mensagem de erro e sair do script
exit_with_error() {
    echo "Erro: $1"
    exit 1
}

# Verificar se o script está sendo executado como root
if [[ $EUID -ne 0 ]]; then
    exit_with_error "Este script deve ser executado como root."
fi

# Etapa 1: Habilitar o modo desenvolvedor do Chromebook
echo "Habilitando o modo desenvolvedor..."
sudo crossystem dev_boot_usb=1 dev_boot_signed_only=0
sudo chromeos-setdevpasswd

# Etapa 2: Clonar o repositório do Git
echo "Clonando o repositório..."
git clone https://github.com/seu_usuario/seu_repo.git

# Etapa 3: Confirmar as variáveis declaradas pelo código (substitua com as suas variáveis)
var1="valor1"
var2="valor2"

# Etapa 4: Iniciar o script SSH
echo "Iniciando o servidor SSH..."
sudo service ssh start

# Etapa 5: Tornar o script SSH persistente com cron (opcional)
echo "Tornando o script SSH persistente..."
(crontab -l 2>/dev/null; echo "@reboot /caminho/para/seu/script/ssh.sh") | crontab -

# Etapa 6: Instalar os requirements.md do app Python (substitua com o comando correto para instalar os pacotes)
echo "Instalando as dependências do aplicativo Python..."
pip install -r /caminho/para/requirements.md

# Etapa 7: Tornar o script play.py persistente com cron (opcional)
echo "Tornando o script play.py persistente..."
(crontab -l 2>/dev/null; echo "@reboot /caminho/para/seu/script/play.py") | crontab -

echo "Inicialização concluída com sucesso!"

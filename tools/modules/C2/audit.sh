#!/bin/bash

# nc -lvp 2222 | tee -a output.txt

# Ler o que foi digitado e inserir no arquivo de saída
while read -r line; do
    # Redirecionar a entrada padrão para o arquivo de saída
    exec < "$output_file"

    # Obtém a data e hora atual
    data_hora=$(date +"%Y-%m-%d %H:%M:%S")

    # Anexa o comando, a data e a hora ao arquivo output.txt
    echo "$data_hora - Comando: $line" >> ./output.txt

    # Executa o comando e redireciona sua saída para o arquivo output.txt
    $line >> ./output.txt 2>&1
done